<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©.. Ø¨Ø³ Ù…Ø§ Ø£Ø¯Ø±ÙŠ â€” Ù„Ø¹Ø¨Ø© Ø­ÙÙ„Ø§Øª</title>
  <style>
    :root{
      /* Ø£Ù„ÙˆØ§Ù† Ø£Ø²Ø±Ù‚ Ù‡Ø§Ø¯Ø¦ */
      --bg:#eaf2ff;          /* Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© Ø¬Ø¯Ø§Ù‹ */
      --card:#ffffff;        /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨ÙŠØ¶Ø§Ø¡ */
      --ink:#0f1a2b;         /* Ù†Øµ ØºØ§Ù…Ù‚ */
      --muted:#6b7a90;       /* Ù†Øµ Ø¨Ø§Ù‡Øª */
      --dark:#1b1f3a;

      --primary:#3b82f6;     /* Ø£Ø²Ø±Ù‚ Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
      --primary-ink:#ffffff; /* Ù†Øµ Ø²Ø± */
      --accent:#1f3a8a;      /* Ø£Ø²Ø±Ù‚ Ø£ØºÙ…Ù‚ Ù„Ù„ØªÙØ§ØµÙŠÙ„ */
      --shadow:0 8px 18px rgba(15,26,43,.12);

      --chip:#eef2ff;        /* Ø´ÙØ¨Ù‘Ø§Øª Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ */
      --chip-ink:#1b1f3a;
      --tile-border:#e5ecff;
      --tile-active:#e8f0ff;
      --highlight:#fde68a;   /* Ø´Ø§Ø±Ø© ØµØºÙŠØ±Ø© */
    }
    *{box-sizing:border-box}
    body{
      margin:0;background:var(--bg);color:var(--ink);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Kufi Arabic",Tahoma,Arial
    }
    .app{max-width:980px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}

    header{
      display:flex;align-items:center;justify-content:space-between;padding:16px 18px
    }
    header .home{
      background:var(--primary);border:none;color:#fff;width:44px;height:44px;border-radius:999px;
      display:grid;place-items:center;box-shadow:var(--shadow);cursor:pointer
    }
    header .milk{font-weight:700;opacity:.8;color:var(--accent)}

    .container{flex:1;padding:14px}
    h1,h2,h3{margin:0 0 12px}
    h1{font-size:28px}
    h2{font-size:22px}
    p{color:var(--muted)}

    .title{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:8px}
    .title .logo{
      width:38px;height:38px;display:grid;place-items:center;border-radius:12px;background:var(--accent);
      color:#fff;font-weight:900;box-shadow:var(--shadow)
    }
    .subtitle{opacity:.9;font-size:12px;color:var(--muted)}

    .card{background:var(--card);color:var(--dark);border:0;border-radius:18px;padding:16px;margin:12px 0;box-shadow:var(--shadow)}

    button{cursor:pointer;border:none}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:14px 24px;border-radius:16px;
      font-size:18px;font-weight:800;box-shadow:0 6px 0 rgba(0,0,0,.08);transition:transform .05s ease-in
    }
    .btn:active{transform:translateY(2px)}
    .btn-primary{background:var(--primary);color:var(--primary-ink)}
    .btn-secondary{background:#eef2ff;color:#1b1f3a}
    .btn-ghost{background:rgba(59,130,246,.12);color:#0f1a2b}

    input,select,textarea{
      width:100%;padding:12px 14px;border-radius:12px;border:2px solid transparent;outline:none;background:#fff;color:#111
    }
    input:focus,select:focus,textarea:focus{border-color:#bfdbfe}

    .row{display:flex;gap:12px;flex-wrap:wrap}
    .col{flex:1 1 240px}
    .list{display:flex;gap:8px;flex-wrap:wrap}

    .pill{
      padding:12px 16px;border-radius:999px;background:var(--chip);color:var(--chip-ink);
      font-weight:700;display:flex;align-items:center;gap:8px;box-shadow:var(--shadow)
    }
    .pill button{width:auto;padding:6px 10px;border-radius:10px;background:#bfdbfe;color:#0f1a2b}

    .hidden{display:none}
    .grid{display:grid;gap:10px}

    .hr{height:1px;background:#dde6ff;margin:14px 0}
    .footer{opacity:.95;font-size:12px;color:var(--muted)}
    .big{font-size:22px;color:#1b1f3a}
    .word-flash{font-weight:900;font-size:34px;letter-spacing:1px;color:#1f3a8a}

    .badge{display:inline-block;padding:6px 10px;border-radius:12px;background:var(--highlight);color:#402d00;font-weight:800}
    .score{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:12px;background:#eef2ff;color:#1b1f3a}

    .bottom{display:flex;gap:10px;justify-content:center;margin-top:8px}

    .handoff-box{background:#fff;color:#111;border-radius:18px;padding:18px;box-shadow:var(--shadow)}

    /* Ø´Ø¨ÙƒØ© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØ®Ù…ÙŠÙ†: 8 Ø¹Ù†Ø§ØµØ± (4 Ø£Ø¹Ù…Ø¯Ø©) */
    .choices{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px;margin-top:12px}
    .choice{background:#fff;border:2px solid var(--tile-border);border-radius:14px;padding:12px;font-weight:800;cursor:pointer}
    .choice.selected{border-color:#3b82f6;background:#eff6ff}

    /* Ø´Ø§Ø´Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ (Ø§Ù„Ø±ÙˆÙ„ÙŠØª) */
    .name-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin:12px 0}
    .tile{background:#fff;border:2px solid var(--tile-border);border-radius:14px;padding:14px;text-align:center;font-weight:900}
    .tile.active{border-color:#3b82f6;background:var(--tile-active);transform:scale(1.03)}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <button class="home" id="homeBtn" title="Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" type="button">ğŸ </button>
      <div class="milk">450 ğŸ¥›</div>
    </header>
    <div class="container">
      <div class="title">
        <div class="logo">ğŸ•µï¸</div>
        <div>
          <h1 style="color:#0f1a2b;letter-spacing:1px;">Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©.. Ø¨Ø³ Ù…Ø§ Ø£Ø¯Ø±ÙŠ!</h1>
          <div class="subtitle">Ø¬Ù„Ø³Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ù„: Ù†Ø­Ø¯Ø¯ Ù…Ù† ÙŠØ³Ø£Ù„ Ù…Ù† â€” Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø¦Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</div>
        </div>
      </div>

      <!-- Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† -->
      <div id="view-names" class="card">
        <h2>Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h2>
        <div class="row" style="align-items:flex-end">
          <div class="col">
            <label>Ø£Ø¶Ù Ø§Ø³Ù… Ù„Ø§Ø¹Ø¨</label>
            <input id="nameInput" placeholder="Ù…Ø«Ø§Ù„: Ø·Ø§Ø±Ù‚">
          </div>
          <div class="col" style="max-width:200px">
            <button id="addNameBtn" class="btn btn-ghost" type="button">â• Ø¥Ø¶Ø§ÙØ©</button>
          </div>
        </div>
        <div class="hr"></div>
        <div id="namesList" class="list"></div>
        <div class="hr"></div>
        <div class="bottom">
          <button id="toCategory" class="btn btn-primary" type="button">Ø§Ù„ØªØ§Ù„ÙŠ: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ</button>
          <button id="clearNames" class="btn btn-secondary" type="button">Ù…Ø³Ø­ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡</button>
        </div>
        <p class="footer">ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© 3 Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.</p>
      </div>

      <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ -->
      <div id="view-category" class="card hidden">
        <h2>Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ ÙˆØ·Ø±ÙŠÙ‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª</h2>
        <div class="row">
          <div class="col">
            <label>Ø§Ù„ØªØµÙ†ÙŠÙ</label>
            <select id="categorySelect"></select>
          </div>
          <div class="col">
            <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø­ÙˆØ§Ø±ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ø±Ø¶</label>
            <select id="turnCount">
              <option value="4">4</option>
              <option value="6" selected>6</option>
              <option value="8">8</option>
            </select>
          </div>
          <div class="col">
            <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</label>
            <select id="pairMode">
              <option value="random" selected>Ø¹Ø´ÙˆØ§Ø¦ÙŠ</option>
              <option value="manual">Ø§Ø®ØªÙŠØ§Ø± ÙŠØ¯ÙˆÙŠ</option>
            </select>
          </div>
        </div>
        <div id="manualPairs" class="row hidden">
          <div class="col">
            <label>Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ù„Ù„Ø£ØºÙ„Ø¨ÙŠØ©)</label>
            <input id="baseWord" placeholder="Ù…Ø«Ø§Ù„: Ù‚Ù‡ÙˆØ©">
          </div>
          <div class="col">
            <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø®ØªÙ„Ù (Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©)</label>
            <input id="oddWord" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø§ÙŠ">
          </div>
        </div>
        <div class="hr"></div>
        <div class="bottom">
          <button class="btn btn-secondary" id="backToNames" type="button">Ø±Ø¬ÙˆØ¹</button>
          <button id="startRound" class="btn btn-primary" type="button">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
        </div>
      </div>

      <!-- ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ù„ÙƒÙ„Ù…Ø© -->
      <div id="view-reveal" class="card hidden">
        <h2>ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„ÙƒÙ„ Ù„Ø§Ø¹Ø¨</h2>
        <div id="handoffBox" class="handoff-box">
          <div id="handoffText" class="big">â€”</div>
          <div class="hr"></div>
          <button id="revealBtn" class="btn btn-primary" style="width:100%" type="button">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø©</button>
          <div id="wordShown" class="word-flash center hidden" style="margin-top:8px"></div>
          <div id="hint" class="footer center hidden">Ø³ÙŠØ®ØªÙÙŠ Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†ÙŠ â€” Ù„Ø§ ØªØ¯Ø¹ Ø£Ø­Ø¯Ù‹Ø§ ÙŠØ±Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©</div>
        </div>
        <div class="bottom">
          <button class="btn btn-secondary" id="revealBack" type="button">Ø±Ø¬ÙˆØ¹</button>
          <button class="btn btn-primary" id="revealNext" type="button">Ø§Ù„ØªØ§Ù„ÙŠ</button>
          <button class="btn btn-secondary" id="toDialogue" disabled type="button">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø­ÙˆØ§Ø±ÙŠØ©</button>
        </div>
      </div>

      <!-- Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø­ÙˆØ§Ø± (Ù…Ù† ÙŠØ³Ø£Ù„ Ù…Ù†) -->
      <div id="view-dialogue" class="card hidden">
        <div class="row" style="align-items:center;justify-content:space-between">
          <h2>Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø­ÙˆØ§Ø± <span class="badge" id="tProgress">0/0</span></h2>
          <div class="badge" id="currentCategory">ØªØµÙ†ÙŠÙ</div>
        </div>
        <div class="hr"></div>
        <div class="card" style="text-align:center">
          <div class="big" style="margin-bottom:6px">Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¢Ù†:</div>
          <div id="pairText" class="word-flash" style="margin:6px 0 10px">â€”</div>
          <div class="subtitle">(ÙŠØªÙƒÙ„Ù… <span id="askerName" class="badge"></span> ÙˆÙŠÙˆØ¬Ù‘Ù‡ Ø³Ø¤Ø§Ù„Ù‹Ø§ Ù„Ù€ <span id="targetName" class="badge"></span>)</div>
        </div>
        <div class="bottom">
          <button id="nextPair" class="btn btn-primary" type="button">Ø§Ù„Ø¯ÙˆØ± Ø§Ù„ØªØ§Ù„ÙŠ</button>
          <button class="btn btn-secondary" id="goReveal" type="button">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®ØªÙ„Ù</button>
        </div>
        <p class="footer">Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙ‚Ø· ÙŠØ­Ø¯Ø¯ Ù…Ù† ÙŠØ³Ø£Ù„ Ù…Ù† â€” Ù„Ø§ ÙŠØ·Ø±Ø­ Ø£Ø³Ø¦Ù„Ø©.</p>
      </div>

      <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ø§Ù„Ø±ÙˆÙ„ÙŠØª ÙŠÙˆÙ‚Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø®ØªÙ„Ù) -->
      <div id="view-odd" class="card hidden">
        <h2>Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ğŸ¬</h2>
        <div class="handoff-box" style="text-align:center">
          <div class="big" style="margin-bottom:8px">Ø§Ø³ØªØ¹Ø±Ø§Ø¶ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø¨Ø§Ù„ØªØªØ§Ø¨Ø¹</div>
          <div id="oddGrid" class="name-grid"></div>
          <div class="hr"></div>
          <div id="oddCycle" class="word-flash">Ø¬Ø§Ù‡Ø²ÙŠÙ†ØŸ</div>
          <div class="bottom">
            <button id="startOddShow" class="btn btn-primary" type="button">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ø±Ø¶</button>
            <button id="oddNext" class="btn btn-primary hidden" type="button">Ø§Ù„ØªØ§Ù„ÙŠ</button>
          </div>
          <p class="footer">Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ù„ØªÙˆÙ‚Ù Ø¹Ù„Ù‰ ØµØ§Ø­Ø¨ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.</p>
        </div>
      </div>

      <!-- ØªØ®Ù…ÙŠÙ† Ø§Ù„ÙƒÙ„Ù…Ø© (ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø®ØªÙ„Ù ÙÙ‚Ø·) -->
      <div id="view-guess" class="card hidden">
        <h2>ØªØ®Ù…ÙŠÙ† Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© ğŸ¯</h2>
        <p class="subtitle">Ø§Ø®ØªØ± Ù…Ø§ ØªØ¹ØªÙ‚Ø¯ Ø£Ù†Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØªÙŠ Ø¸Ù‡Ø±Øª Ù„Ø¨Ù‚ÙŠØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</p>
        <div id="choices" class="choices"></div>
        <div class="bottom">
          <button id="confirmGuess" class="btn btn-primary" type="button" disabled>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</button>
        </div>
      </div>

      <!-- Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
      <div id="view-result" class="card hidden">
        <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø©</h2>
        <div id="resultSummary" class="grid"></div>
        <div class="hr"></div>
        <div class="bottom">
          <button class="btn btn-ghost" id="newRoundSame" type="button">Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© (Ù†ÙØ³ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†)</button>
          <button id="newRoundReset" class="btn btn-primary" type="button">Ø¥Ø¹Ø¯Ø§Ø¯ Ø¬Ø¯ÙŠØ¯</button>
        </div>
      </div>

      <!-- Ø³ÙƒÙˆØ±Ø¯ Ø¨Ø³ÙŠØ· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) -->
      <div id="view-score" class="card hidden">
        <h2>Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ±Ø§ÙƒÙ…Ø©</h2>
        <div id="scoreList" class="list" style="flex-direction:column"></div>
      </div>
    </div>
  </div>

  <script>
  const PACKS = {
    "Ø­ÙŠÙˆØ§Ù†Ø§Øª":[["Ø£Ø³Ø¯","Ù†Ù…Ø±"],["Ø°Ø¦Ø¨","ÙƒÙ„Ø¨"],["Ù‚Ø·Ø©","Ø£Ø±Ù†Ø¨"],["Ø­ØµØ§Ù†","Ø­Ù…Ø§Ø±"],["ÙÙŠÙ„","ÙØ±Ø³ Ø§Ù„Ù†Ù‡Ø±"],["Ø¬Ù…Ù„","Ù„Ø§Ù…Ø§"],["ØµÙ‚Ø±","Ù†Ø³Ø±"],["Ø¯Ù„ÙÙŠÙ†","Ø­ÙˆØª"],["ØªÙ…Ø³Ø§Ø­","Ø³Ø­Ù„ÙŠØ©"],["ØºØ²Ø§Ù„","Ù…Ù‡Ø§"]],
    "Ø£ÙƒÙ„Ø§Øª ÙˆÙ…Ø´Ø±ÙˆØ¨Ø§Øª":[["Ø¨ÙŠØªØ²Ø§","Ø¨Ø±Ø¬Ø±"],["Ø´Ø§ÙˆØ±Ù…Ø§","ÙØ§Ù‡ÙŠØªØ§"],["Ù‚Ù‡ÙˆØ©","Ø´Ø§ÙŠ"],["Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„","Ø¹ØµÙŠØ± Ù…Ø§Ù†Ø¬Ùˆ"],["ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ","Ù„Ø§ØªÙŠÙ‡"],["Ø±Ø²","Ù…ÙƒØ±ÙˆÙ†Ø©"],["ÙƒØ¹Ùƒ","Ø¯ÙˆÙ†Ø§Øª"],["Ù…Ø§Ø¡ ØºØ§Ø²ÙŠ","Ø¹ØµÙŠØ± ØºØ§Ø²ÙŠ"],["ÙÙˆÙ„","Ø­Ù…Øµ"],["Ø¹Ø³Ù„","Ø¯Ø¨Ø³"]],
    "Ø£Ù…Ø§ÙƒÙ† ÙˆÙ…Ø¯Ù†":[["Ø¨Ø§Ø±ÙŠØ³","Ù„Ù†Ø¯Ù†"],["Ù…ÙƒØ©","Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"],["Ø·ÙˆÙƒÙŠÙˆ","Ø³ÙˆÙ„"],["Ø§Ù„Ø±ÙŠØ§Ø¶","Ø¬Ø¯Ø©"],["Ø§Ù„ØµØ­Ø±Ø§Ø¡","Ø§Ù„ÙˆØ§Ø­Ø©"],["Ø´Ø§Ø·Ø¦","Ù…Ø³Ø¨Ø­"],["Ø¬Ø§Ù…Ø¹Ø©","Ù…Ø¯Ø±Ø³Ø©"],["Ù…Ø³ØªØ´ÙÙ‰","Ø¹ÙŠØ§Ø¯Ø©"],["Ø¨Ø±Ø¬","Ù‚Ù„Ø¹Ø©"],["Ø­Ø¯ÙŠÙ‚Ø©","Ù…Ø­Ù…ÙŠØ©"]],
    "Ø£Ø´ÙŠØ§Ø¡ ÙŠÙˆÙ…ÙŠØ©":[["Ø¬ÙˆØ§Ù„","ØªØ§Ø¨Ù„Øª"],["Ù…ÙƒÙŠÙ","Ù…Ø±ÙˆØ­Ø©"],["Ù‚Ù„Ù…","Ù…Ø§Ø±ÙƒØ±"],["ÙƒØ±Ø³ÙŠ","Ø£Ø±ÙŠÙƒØ©"],["Ø±ÙŠÙ…ÙˆØª","ÙŠØ¯ ØªØ­ÙƒÙ…"],["Ø³Ù…Ø§Ø¹Ø§Øª","Ø³Ø¨ÙŠÙƒØ±"],["Ø­Ø§Ø³ÙˆØ¨ Ù…Ø­Ù…ÙˆÙ„","Ø­Ø§Ø³ÙˆØ¨ Ù…ÙƒØªØ¨ÙŠ"],["Ù…ØµØ¨Ø§Ø­","Ø´Ù…Ø¹Ø©"],["Ø³Ø§Ø¹Ø© ÙŠØ¯","Ø³ÙˆØ§Ø± Ø°ÙƒÙŠ"],["Ø¯Ø±Ø§Ø¬Ø©","Ø³ÙƒÙˆØªØ±"]]
  };

  /* ØªØ´Ø§Ø¨Ù‡Ø§Øª ÙŠØ¯ÙˆÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø© â€” Ù„Ø¥Ù†ØªØ§Ø¬ Ù…Ø´ØªØªØ§Øª Ù…Ù† Ù†ÙØ³ Ø§Ù„Ø¨ÙŠØ¦Ø© */
  const SIMILAR = {
    /* Ø­ÙŠÙˆØ§Ù†Ø§Øª */
    "Ø£Ø³Ø¯":["Ù†Ù…Ø±","ÙÙ‡Ø¯","ÙˆØ´Ù‚","Ø¶Ø¨Ø¹","Ø°Ø¦Ø¨","Ø¨ÙˆÙ…Ø§","ÙŠØºÙˆØ±"],
    "Ù†Ù…Ø±":["Ø£Ø³Ø¯","ÙÙ‡Ø¯","ÙˆØ´Ù‚","Ø¶Ø¨Ø¹","ÙŠØºÙˆØ±","Ø¨ÙˆÙ…Ø§","ÙˆØ´Ù‚ ØµØ­Ø±Ø§ÙˆÙŠ"],
    "Ø°Ø¦Ø¨":["Ø«Ø¹Ù„Ø¨","Ø§Ø¨Ù† Ø¢ÙˆÙ‰","ÙƒÙ„Ø¨","Ø¶Ø¨Ø¹","ÙƒÙˆÙŠÙˆØªÙŠ"],
    "ÙƒÙ„Ø¨":["Ø°Ø¦Ø¨","Ø«Ø¹Ù„Ø¨","Ø§Ø¨Ù† Ø¢ÙˆÙ‰","ÙƒÙˆÙŠÙˆØªÙŠ"],
    "Ù‚Ø·Ø©":["ÙˆØ´Ù‚","Ù‚Ø· Ø¨Ø±ÙŠ","ÙÙ‡Ø¯","Ù†Ù…Ø±","Ø¨ÙˆÙ…Ø§"],
    "Ø£Ø±Ù†Ø¨":["Ø³Ù†Ø¬Ø§Ø¨","Ù‡Ø§Ù…Ø³ØªØ±","Ø®Ù†Ø²ÙŠØ± ØºÙŠÙ†ÙŠ","Ø£Ø±Ù†Ø¨ Ø¨Ø±ÙŠ"],
    "Ø­ØµØ§Ù†":["Ø­Ù…Ø§Ø±","Ø¨ØºÙ„","Ø­Ù…Ø§Ø± ÙˆØ­Ø´ÙŠ","Ù…Ù‡Ø±"],
    "Ø­Ù…Ø§Ø±":["Ø­ØµØ§Ù†","Ø¨ØºÙ„","Ø­Ù…Ø§Ø± ÙˆØ­Ø´ÙŠ"],
    "ÙÙŠÙ„":["ÙØ±Ø³ Ø§Ù„Ù†Ù‡Ø±","ÙˆØ­ÙŠØ¯ Ø§Ù„Ù‚Ø±Ù†","Ø¬Ø§Ù…ÙˆØ³"],
    "ÙØ±Ø³ Ø§Ù„Ù†Ù‡Ø±":["ÙÙŠÙ„","ÙˆØ­ÙŠØ¯ Ø§Ù„Ù‚Ø±Ù†","Ø¬Ø§Ù…ÙˆØ³"],
    "Ø¬Ù…Ù„":["Ù„Ø§Ù…Ø§","Ø£Ù„Ø¨Ø§ÙƒØ§","Ø­Ù…Ø§Ø±"],
    "Ù„Ø§Ù…Ø§":["Ø£Ù„Ø¨Ø§ÙƒØ§","Ø¬Ù…Ù„","Ø­Ù…Ø§Ø±"],
    "ØµÙ‚Ø±":["Ù†Ø³Ø±","Ø´Ø§Ù‡ÙŠÙ†","Ø¹Ù‚Ø§Ø¨"],
    "Ù†Ø³Ø±":["Ø¹Ù‚Ø§Ø¨","ØµÙ‚Ø±","Ø±Ø®Ù…Ø©"],
    "Ø¯Ù„ÙÙŠÙ†":["Ø­ÙˆØª","Ø®Ù†Ø²ÙŠØ± Ø§Ù„Ø¨Ø­Ø±","ÙÙ‚Ù…Ø©"],
    "Ø­ÙˆØª":["Ø¯Ù„ÙÙŠÙ†","Ø­ÙˆØª Ù‚Ø§ØªÙ„","ÙÙ‚Ù…Ø©"],
    "ØªÙ…Ø³Ø§Ø­":["Ø³Ø­Ù„ÙŠØ©","ÙˆÙØ±Ù„","Ø£ÙØ¹Ù‰"],
    "Ø³Ø­Ù„ÙŠØ©":["ØªÙ…Ø³Ø§Ø­","ÙˆÙØ±Ù„","Ø£ÙØ¹Ù‰"],
    "ØºØ²Ø§Ù„":["Ø¸Ø¨ÙŠ","Ø±ÙŠÙ…","Ù…Ù‡Ø§"],
    "Ù…Ù‡Ø§":["ØºØ²Ø§Ù„","Ø¸Ø¨ÙŠ","Ø±ÙŠÙ…"],

    /* Ø£ÙƒÙ„Ø§Øª ÙˆÙ…Ø´Ø±ÙˆØ¨Ø§Øª */
    "Ø¨ÙŠØªØ²Ø§":["Ø¨Ø±Ø¬Ø±","Ø³Ø§Ù†Ø¯ÙˆØªØ´","Ø¨Ø§Ø³ØªØ§","Ù„Ø§Ø²Ø§Ù†ÙŠØ§","Ø³Ø¨Ø§ØºÙŠØªÙŠ","ØªØ§ÙƒÙˆ","ÙØ§Ù‡ÙŠØªØ§"],
    "Ø¨Ø±Ø¬Ø±":["Ø´Ø§ÙˆØ±Ù…Ø§","ÙØ§Ù‡ÙŠØªØ§","Ø³Ø§Ù†Ø¯ÙˆØªØ´","ØªØ§ÙƒÙˆ","Ø¨ÙŠØªØ²Ø§"],
    "Ø´Ø§ÙˆØ±Ù…Ø§":["ÙØ§Ù‡ÙŠØªØ§","ÙƒØ¨Ø§Ø¨","Ø¨Ø±Ø¬Ø±","ØªØ§ÙƒÙˆ"],
    "ÙØ§Ù‡ÙŠØªØ§":["Ø´Ø§ÙˆØ±Ù…Ø§","ØªØ§ÙƒÙˆ","Ø¨Ø±Ø¬Ø±","Ø¨ÙˆØ±ÙŠØªÙˆ"],
    "Ù‚Ù‡ÙˆØ©":["ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ","Ù„Ø§ØªÙŠÙ‡","Ø¥Ø³Ø¨Ø±Ø³Ùˆ","Ù…ÙˆÙƒØ§","ÙÙ„Ø§Øª ÙˆØ§ÙŠØª"],
    "Ø´Ø§ÙŠ":["Ù‚Ù‡ÙˆØ©","Ø´Ø§ÙŠ Ø¨Ø§Ù„Ø­Ù„ÙŠØ¨","Ù†Ø¹Ù†Ø§Ø¹","ÙƒØ±Ùƒ"],
    "Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„":["Ø¹ØµÙŠØ± Ù…Ø§Ù†Ø¬Ùˆ","Ø¹ØµÙŠØ± ØªÙØ§Ø­","Ø¹ØµÙŠØ± Ø£Ù†Ø§Ù†Ø§Ø³","Ø¹ØµÙŠØ± Ø®ÙˆØ®"],
    "Ø¹ØµÙŠØ± Ù…Ø§Ù†Ø¬Ùˆ":["Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„","Ø¹ØµÙŠØ± Ø®ÙˆØ®","Ø³Ù…ÙˆØ°ÙŠ","Ø¹ØµÙŠØ± Ø£Ù†Ø§Ù†Ø§Ø³"],
    "ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ":["Ù„Ø§ØªÙŠÙ‡","Ù…ÙˆÙƒØ§","Ø¥Ø³Ø¨Ø±Ø³Ùˆ","ÙÙ„Ø§Øª ÙˆØ§ÙŠØª"],
    "Ù„Ø§ØªÙŠÙ‡":["ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ","Ù…ÙˆÙƒØ§","ÙÙ„Ø§Øª ÙˆØ§ÙŠØª","Ø¥Ø³Ø¨Ø±Ø³Ùˆ"],
    "Ø±Ø²":["Ù…ÙƒØ±ÙˆÙ†Ø©","ÙƒØ¨Ø³Ø©","Ø¨Ø±ÙŠØ§Ù†ÙŠ","Ù…Ø¶ØºÙˆØ·"],
    "Ù…ÙƒØ±ÙˆÙ†Ø©":["Ù„Ø§Ø²Ø§Ù†ÙŠØ§","Ø³Ø¨Ø§ØºÙŠØªÙŠ","Ø±Ø²","Ø¨Ø§Ø³ØªØ§"],
    "ÙƒØ¹Ùƒ":["Ø¯ÙˆÙ†Ø§Øª","ÙƒØ¨ ÙƒÙŠÙƒ","Ù…Ø§ÙÙ†","ÙƒØ±ÙˆØ§Ø³ÙˆÙ†"],
    "Ø¯ÙˆÙ†Ø§Øª":["ÙƒØ¹Ùƒ","Ù…Ø§ÙÙ†","ÙƒØ±ÙˆØ§Ø³ÙˆÙ†","ÙƒØ¨ ÙƒÙŠÙƒ"],
    "Ù…Ø§Ø¡ ØºØ§Ø²ÙŠ":["Ø¹ØµÙŠØ± ØºØ§Ø²ÙŠ","ØµÙˆØ¯Ø§","Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ"],
    "Ø¹ØµÙŠØ± ØºØ§Ø²ÙŠ":["Ù…Ø§Ø¡ ØºØ§Ø²ÙŠ","ØµÙˆØ¯Ø§","Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ"],
    "ÙÙˆÙ„":["Ø­Ù…Øµ","ÙØ§ØµÙˆÙ„ÙŠØ§","Ø¹Ø¯Ø³","ÙÙˆÙ„ Ø¨Ø§Ù„Ø·Ø­ÙŠÙ†Ø©"],
    "Ø­Ù…Øµ":["ÙÙˆÙ„","Ù…ØªØ¨Ù‘Ù„","Ø¨Ø§Ø¨Ø§ ØºÙ†ÙˆØ¬","ÙÙ„Ø§ÙÙ„"],
    "Ø¹Ø³Ù„":["Ø¯Ø¨Ø³","Ù…Ø±Ø¨Ù‰","Ù‚Ø·Ø±","ØªÙ…Ø±"],
    "Ø¯Ø¨Ø³":["Ø¹Ø³Ù„","Ù‚Ø·Ø±","ØªÙ…Ø±","Ù…Ø±Ø¨Ù‰"],

    /* Ø£Ù…Ø§ÙƒÙ† ÙˆÙ…Ø¯Ù† */
    "Ø¨Ø§Ø±ÙŠØ³":["Ù„Ù†Ø¯Ù†","Ø±ÙˆÙ…Ø§","Ù…Ø¯Ø±ÙŠØ¯","Ø¨Ø±Ù„ÙŠÙ†"],
    "Ù„Ù†Ø¯Ù†":["Ø¨Ø§Ø±ÙŠØ³","Ø¨Ø±Ù„ÙŠÙ†","Ù…Ø§Ù†Ø´Ø³ØªØ±","Ù…Ø¯Ø±ÙŠØ¯"],
    "Ù…ÙƒØ©":["Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©","Ø¬Ø¯Ø©","Ø§Ù„Ø·Ø§Ø¦Ù","Ù…Ù†Ù‰"],
    "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©":["Ù…ÙƒØ©","ÙŠÙ†Ø¨Ø¹","Ø¨Ø¯Ø±","Ø§Ù„Ø¹Ù„Ø§"],
    "Ø·ÙˆÙƒÙŠÙˆ":["Ø³ÙˆÙ„","Ø£ÙˆØ³Ø§ÙƒØ§","ÙƒÙŠÙˆØªÙˆ","ÙŠÙˆÙƒÙˆÙ‡Ø§Ù…Ø§"],
    "Ø³ÙˆÙ„":["Ø·ÙˆÙƒÙŠÙˆ","Ø¨ÙˆØ³Ø§Ù†","Ø¯Ø§ÙŠØºÙˆ","Ø¥Ù†Ø´ÙŠÙˆÙ†"],
    "Ø§Ù„Ø±ÙŠØ§Ø¶":["Ø¬Ø¯Ø©","Ø§Ù„Ø¯Ù…Ø§Ù…","Ù…ÙƒØ©","Ø§Ù„Ø®Ø¨Ø±"],
    "Ø¬Ø¯Ø©":["Ø§Ù„Ø±ÙŠØ§Ø¶","Ù…ÙƒØ©","Ø§Ù„Ø·Ø§Ø¦Ù","ÙŠÙ†Ø¨Ø¹"],
    "Ø§Ù„ØµØ­Ø±Ø§Ø¡":["Ø§Ù„ÙˆØ§Ø­Ø©","ÙƒØ«Ø¨Ø§Ù†","Ø³ÙØ§Ø±ÙŠ","ØºØ§Ø¨Ø©"],
    "Ø§Ù„ÙˆØ§Ø­Ø©":["Ø§Ù„ØµØ­Ø±Ø§Ø¡","Ù†Ø®ÙŠÙ„","Ø¹ÙŠÙ† Ù…Ø§Ø¡","Ø³Ø±Ø§Ø¨"],
    "Ø´Ø§Ø·Ø¦":["Ù…Ø³Ø¨Ø­","Ø¨Ø­Ø±","Ù…Ø±Ø³Ù‰","ÙƒÙˆØ±Ù†ÙŠØ´"],
    "Ù…Ø³Ø¨Ø­":["Ø´Ø§Ø·Ø¦","Ø³Ø¨Ø§","Ø¬Ø§ÙƒÙˆØ²ÙŠ","Ø³Ø§ÙˆÙ†Ø§"],
    "Ø¬Ø§Ù…Ø¹Ø©":["Ù…Ø¯Ø±Ø³Ø©","Ù…Ø¹Ù‡Ø¯","ÙƒÙ„ÙŠØ©","Ø³ÙƒÙ† Ø·Ù„Ø§Ø¨"],
    "Ù…Ø¯Ø±Ø³Ø©":["Ø¬Ø§Ù…Ø¹Ø©","Ø±ÙˆØ¶Ø©","Ù…Ø¹Ù‡Ø¯","ÙØµÙ„"],
    "Ù…Ø³ØªØ´ÙÙ‰":["Ø¹ÙŠØ§Ø¯Ø©","Ø¥Ø³Ø¹Ø§Ù","Ù…Ø±ÙƒØ² ØµØ­ÙŠ","ØµÙŠØ¯Ù„ÙŠØ©"],
    "Ø¹ÙŠØ§Ø¯Ø©":["Ù…Ø³ØªØ´ÙÙ‰","ØµÙŠØ¯Ù„ÙŠØ©","Ù…Ø±ÙƒØ² ØµØ­ÙŠ","Ø£Ø´Ø¹Ø©"],
    "Ø¨Ø±Ø¬":["Ù‚Ù„Ø¹Ø©","Ù†Ø§Ø·Ø­Ø© Ø³Ø­Ø§Ø¨","Ù…Ø¨Ù†Ù‰","Ù…Ù†Ø§Ø±Ø©"],
    "Ù‚Ù„Ø¹Ø©":["Ø¨Ø±Ø¬","Ø­ØµÙ†","Ø³ÙˆØ±","Ø®Ù†Ø¯Ù‚"],
    "Ø­Ø¯ÙŠÙ‚Ø©":["Ù…Ø­Ù…ÙŠØ©","Ù…ØªÙ†Ø²Ù‡","ØºØ§Ø¨Ø©","Ø³ÙØ§Ø±ÙŠ"],
    "Ù…Ø­Ù…ÙŠØ©":["Ø­Ø¯ÙŠÙ‚Ø©","Ø³ÙØ§Ø±ÙŠ","Ù…ØªÙ†Ø²Ù‡","ØºØ§Ø¨Ø©"],

    /* Ø£Ø´ÙŠØ§Ø¡ ÙŠÙˆÙ…ÙŠØ© */
    "Ø¬ÙˆØ§Ù„":["ØªØ§Ø¨Ù„Øª","Ø­Ø§Ø³ÙˆØ¨ Ù…Ø­Ù…ÙˆÙ„","Ø³Ù…Ø§Ø¹Ø§Øª","Ø³Ø¨ÙŠÙƒØ±"],
    "ØªØ§Ø¨Ù„Øª":["Ø¬ÙˆØ§Ù„","Ø­Ø§Ø³ÙˆØ¨ Ù…Ø­Ù…ÙˆÙ„","Ù‚Ù„Ù… Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ","Ù‚Ø§Ø±Ø¦ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"],
    "Ù…ÙƒÙŠÙ":["Ù…Ø±ÙˆØ­Ø©","Ù…Ø¨Ø±Ø¯ Ù‡ÙˆØ§Ø¡","Ù…ÙƒÙŠÙ ØµØ­Ø±Ø§ÙˆÙŠ","Ø´ÙØ§Ø·"],
    "Ù…Ø±ÙˆØ­Ø©":["Ù…ÙƒÙŠÙ","Ø´ÙØ§Ø·","Ù…Ø¨Ø±Ø¯ Ù‡ÙˆØ§Ø¡","Ù…Ø±ÙˆØ­Ø© Ø³Ù‚Ù"],
    "Ù‚Ù„Ù…":["Ù…Ø§Ø±ÙƒØ±","Ù‚Ù„Ù… Ø±ØµØ§Øµ","Ø­Ø¨Ø±","Ù‚Ù„Ù… ØªØ¸Ù„ÙŠÙ„"],
    "Ù…Ø§Ø±ÙƒØ±":["Ù‚Ù„Ù…","Ù‚Ù„Ù… Ø³Ø¨ÙˆØ±Ø©","Ù‚Ù„Ù… ØªØ¸Ù„ÙŠÙ„","Ø­Ø¨Ø±"],
    "ÙƒØ±Ø³ÙŠ":["Ø£Ø±ÙŠÙƒØ©","ÙƒÙ†Ø¨Ø©","Ù…Ù‚Ø¹Ø¯","ÙÙˆØªÙŠÙ‡"],
    "Ø£Ø±ÙŠÙƒØ©":["ÙƒØ±Ø³ÙŠ","ÙƒÙ†Ø¨Ø© Ø²Ø§ÙˆÙŠØ©","ÙÙˆØªÙŠÙ‡","Ø´ÙŠØ²Ù„ÙˆÙ†Ø¬"],
    "Ø±ÙŠÙ…ÙˆØª":["ÙŠØ¯ ØªØ­ÙƒÙ…","Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ Ù„Ø§Ø³Ù„ÙƒÙŠØ©","ÙØ£Ø±Ø© Ù„Ø§Ø³Ù„ÙƒÙŠØ©","Ø³Ù…Ø§Ø¹Ø§Øª"],
    "ÙŠØ¯ ØªØ­ÙƒÙ…":["Ø±ÙŠÙ…ÙˆØª","Ø°Ø±Ø§Ø¹ Ø¨Ù„Ø§ÙŠØ³ØªÙŠØ´Ù†","Ø°Ø±Ø§Ø¹ Ø¥ÙƒØ³ Ø¨ÙˆÙƒØ³","Ø¬ÙˆÙŠ ÙƒÙˆÙ†"],
    "Ø³Ù…Ø§Ø¹Ø§Øª":["Ø³Ø¨ÙŠÙƒØ±","Ø³Ù…Ø§Ø¹Ø§Øª Ø£Ø°Ù†","Ø³Ù…Ø§Ø¹Ø§Øª Ø±Ø£Ø³","Ø³Ø§ÙˆÙ†Ø¯Ø¨Ø§Ø±"],
    "Ø³Ø¨ÙŠÙƒØ±":["Ø³Ù…Ø§Ø¹Ø§Øª","Ù…ÙƒØ¨Ø± ØµÙˆØª","Ø³Ø§ÙˆÙ†Ø¯Ø¨Ø§Ø±","Ø³Ù…Ø§Ø¹Ø§Øª Ø¨Ù„ÙˆØªÙˆØ«"],
    "Ø­Ø§Ø³ÙˆØ¨ Ù…Ø­Ù…ÙˆÙ„":["Ø­Ø§Ø³ÙˆØ¨ Ù…ÙƒØªØ¨ÙŠ","ØªØ§Ø¨Ù„Øª","Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­","Ù…Ø§ÙˆØ³"],
    "Ø­Ø§Ø³ÙˆØ¨ Ù…ÙƒØªØ¨ÙŠ":["Ø­Ø§Ø³ÙˆØ¨ Ù…Ø­Ù…ÙˆÙ„","Ø´Ø§Ø´Ø©","ÙØ£Ø±Ø©","Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­"],
    "Ù…ØµØ¨Ø§Ø­":["Ø´Ù…Ø¹Ø©","Ù„Ù…Ø¨Ø©","ÙƒØ´Ø§Ù","ÙØ§Ù†ÙˆØ³"],
    "Ø´Ù…Ø¹Ø©":["Ù…ØµØ¨Ø§Ø­","ÙØ§Ù†ÙˆØ³","ÙˆÙ„Ø§Ø¹Ø©","ÙƒØ´Ø§Ù"],
    "Ø³Ø§Ø¹Ø© ÙŠØ¯":["Ø³ÙˆØ§Ø± Ø°ÙƒÙŠ","Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ©","Ù…Ù†Ø¨Ù‘Ù‡","Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ù‰"],
    "Ø³ÙˆØ§Ø± Ø°ÙƒÙŠ":["Ø³Ø§Ø¹Ø© ÙŠØ¯","Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ©","Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ù‰","Ø³Ù…Ø§Ø¹Ø© Ø±ÙŠØ§Ø¶ÙŠØ©"],
    "Ø¯Ø±Ø§Ø¬Ø©":["Ø³ÙƒÙˆØªØ±","Ù„ÙˆØ­ ØªØ²Ù„Ø¬","Ø¯Ø±Ø§Ø¬Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©","Ø³ÙƒÙˆØªØ± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ"],
    "Ø³ÙƒÙˆØªØ±":["Ø¯Ø±Ø§Ø¬Ø©","Ù„ÙˆØ­ ØªØ²Ù„Ø¬","Ø³ÙƒÙˆØªØ± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ","Ø¯Ø±Ø§Ø¬Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©"]
  };

  // ===== Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø© =====
  let state = {
    players: [],
    scores: {},
    category: null,
    pair: null,           // { base, odd }
    oddIndex: null,       // Ù…Ù† Ø§Ù„Ù…Ø®ØªÙ„Ù
    asked: 0,
    maxTurns: 6,
    revealIdx: 0,
    revealed: {},
    turnAskers: [],
    displayOrder: [],
    guessOptions: [],
    selectedGuess: null,
    guessCorrect: null
  };

  // ===== Ø£Ø¯ÙˆØ§Øª =====
  const $ = sel => document.querySelector(sel);
  const el = (t,c,h) => {const e=document.createElement(t); if(c) e.className=c; if(h!==undefined) e.innerHTML=h; return e;};
  const shuffle = arr => arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);
  const choice = arr => arr[Math.floor(Math.random()*arr.length)];

  function saveScores(){ localStorage.setItem('bsb_scores', JSON.stringify(state.scores)); }
  function loadScores(){ const s=localStorage.getItem('bsb_scores'); if(s) state.scores = JSON.parse(s); }
  function renderScores(){
    const box=$('#scoreList'); if(!box) return; box.innerHTML='';
    Object.entries(state.scores).sort((a,b)=>b[1]-a[1]).forEach(([n,pts])=> box.appendChild(el('div','score',`<strong>${n}</strong><span>${pts} Ù†Ù‚Ø·Ø©</span>`)) );
    $('#view-score').classList.toggle('hidden', !Object.keys(state.scores).length);
  }
  function setView(id){
    ['#view-names','#view-category','#view-reveal','#view-dialogue','#view-odd','#view-guess','#view-result'].forEach(s=>$(s).classList.add('hidden'));
    $(id).classList.remove('hidden');
  }

  // ===== Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ =====
  function renderNames(){
    const list=$('#namesList'); list.innerHTML='';
    state.players.forEach((n,i)=>{
      const pill=el('div','pill');
      pill.appendChild(el('span',null,n));
      const del=el('button',null,'Ø­Ø°Ù'); del.type='button';
      del.onclick=()=>{state.players.splice(i,1); renderNames();};
      pill.appendChild(del);
      list.appendChild(pill);
    });
  }
  $('#addNameBtn')?.addEventListener('click',()=>{
    const v=$('#nameInput').value.trim(); if(!v) return;
    if(state.players.includes(v)) return alert('Ø§Ù„Ø§Ø³Ù… Ù…ÙƒØ±Ø±');
    state.players.push(v); $('#nameInput').value=''; renderNames();
  });
  $('#clearNames')?.addEventListener('click',()=>{ state.players=[]; renderNames(); });
  $('#toCategory')?.addEventListener('click',()=>{
    if(state.players.length<3) return alert('Ø£Ø¶Ù 3 Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
    loadScores(); state.players.forEach(n=>{ if(!(n in state.scores)) state.scores[n]=0; });
    renderScores(); buildCategoryUI(); setView('#view-category');
  });

  function buildCategoryUI(){
    const sel=$('#categorySelect'); sel.innerHTML='';
    Object.keys(PACKS).forEach(k=>{ const o=document.createElement('option'); o.value=k; o.textContent=k; sel.appendChild(o);});
  }
  $('#pairMode')?.addEventListener('change',e=> $('#manualPairs').classList.toggle('hidden', e.target.value!=='manual'));
  $('#backToNames')?.addEventListener('click',()=> setView('#view-names'));

  // ===== Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© =====
  $('#startRound')?.addEventListener('click',()=>{
    state.maxTurns = parseInt($('#turnCount').value,10);
    state.category = $('#categorySelect').value;
    let base, odd;
    if($('#pairMode').value==='manual'){
      base=$('#baseWord').value.trim(); odd=$('#oddWord').value.trim();
      if(!base||!odd) return alert('Ø§Ù…Ù„Ø£ Ø§Ù„ÙƒÙ„Ù…ØªÙŠÙ†');
    } else {
      const p=choice(PACKS[state.category]); [base,odd] = Math.random()<.5 ? p : [p[1],p[0]];
    }
    state.pair={base,odd};
    state.oddIndex=Math.floor(Math.random()*state.players.length); // Ø¹Ø´ÙˆØ§Ø¦ÙŠ ÙØ¹Ù„ÙŠØ§Ù‹
    state.asked=0; state.revealIdx=0; state.revealed={};
    state.turnAskers=shuffle([...state.players]);
    buildRevealSequential(); setView('#view-reveal');
  });

  // ===== ØªÙ…Ø±ÙŠØ± Ø§Ù„ÙƒÙ„Ù…Ø© Ù„ÙƒÙ„ Ù„Ø§Ø¹Ø¨ =====
  function buildRevealSequential(){
    updateHandoffText(); $('#wordShown').classList.add('hidden'); $('#hint').classList.add('hidden');
  }
  function updateHandoffText(){
    const name=state.players[state.revealIdx];
    $('#handoffText').innerHTML=`ğŸ“± <strong>Ø£Ø¹Ø·ÙˆØ§ Ø§Ù„Ø¬Ù‡Ø§Ø² <span class="badge">${name}</span></strong>`;
    $('#revealBtn').disabled=false;
  }
  $('#revealBtn')?.addEventListener('click',()=>{
    const i=state.revealIdx;
    const word=(i===state.oddIndex)?state.pair.odd:state.pair.base;
    const w=$('#wordShown'); w.textContent=word; w.classList.remove('hidden');
    $('#hint').classList.remove('hidden'); $('#revealBtn').disabled=true; state.revealed[state.players[i]]=true;
    setTimeout(()=>{ w.classList.add('hidden'); $('#hint').classList.add('hidden'); }, 3000);
  });
  $('#revealNext')?.addEventListener('click',()=>{
    if(!state.revealed[state.players[state.revealIdx]]){ alert('Ø§Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø£ÙˆÙ„Ø§Ù‹'); return; }
    if(state.revealIdx < state.players.length-1){
      state.revealIdx++; updateHandoffText();
      $('#revealBtn').disabled = false; $('#wordShown').classList.add('hidden'); $('#hint').classList.add('hidden');
    } else {
      $('#toDialogue').disabled = false;
      $('#handoffText').innerHTML = 'âœ… ØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù„Ù„Ø¬Ù…ÙŠØ¹ â€” Ø§Ø¶ØºØ· Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø­ÙˆØ§Ø±ÙŠØ©';
    }
  });
  $('#revealBack')?.addEventListener('click',()=> setView('#view-category'));
  $('#toDialogue')?.addEventListener('click',()=>{
    if($('#toDialogue').disabled){ alert('Ø£ÙƒÙ…Ù„ ØªÙ…Ø±ÙŠØ± Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø£ÙˆÙ„Ø§Ù‹'); return; }
    const unseen = state.players.filter(n=>!state.revealed[n]);
    if(unseen.length){ if(!confirm('Ø¨Ø¹Ø¶ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù„Ù… ÙŠØ´Ø§Ù‡Ø¯ÙˆØ§ ÙƒÙ„Ù…ØªÙ‡Ù…. Ø§Ù„Ø¨Ø¯Ø¡ Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø§Ù„ØŸ')) return; }
    $('#currentCategory').textContent = state.category;
    updatePairUI(); setView('#view-dialogue');
  });

  // ===== Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø­ÙˆØ§Ø± =====
  function pickPair(){
    const asker = state.turnAskers[state.asked % state.turnAskers.length];
    const others = state.players.filter(p=>p!==asker);
    const target = choice(others);
    return {asker,target};
  }
  function updatePairUI(){
    $('#tProgress').textContent=`${state.asked}/${state.maxTurns}`;
    const {asker,target}=pickPair();
    $('#askerName').textContent=asker; $('#targetName').textContent=target;
    $('#pairText').textContent=`${asker} ÙŠØ³Ø£Ù„ ${target}`;
  }
  $('#nextPair')?.addEventListener('click',()=>{
    if(state.asked+1>=state.maxTurns) return alert('Ø¨Ù„ØºØª Ø­Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±. Ø§Ø¶ØºØ· Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®ØªÙ„Ù.');
    state.asked++; if(Math.random()<0.35) state.turnAskers=shuffle(state.turnAskers);
    updatePairUI();
  });
  $('#goReveal')?.addEventListener('click',()=>{
    prepOddShow(); setView('#view-odd');
  });

  // ===== Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®ØªÙ„Ù (Ø±ÙˆÙ„ÙŠØª) =====
  function prepOddShow(){
    const startBtn = document.getElementById('startOddShow');
    const nextBtn  = document.getElementById('oddNext');
    const slot     = document.getElementById('oddCycle');
    if(startBtn){ startBtn.classList.remove('hidden'); }
    if(nextBtn){ nextBtn.classList.add('hidden'); }
    if(slot){ slot.textContent = 'Ø¬Ø§Ù‡Ø²ÙŠÙ†ØŸ'; }
    buildOddGrid();
  }
  function buildOddGrid(){
    state.displayOrder = shuffle(state.players.map((_,i)=>i)); // ØªØ±ØªÙŠØ¨ Ø¹Ø±Ø¶ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
    const grid = document.getElementById('oddGrid'); if(!grid) return; grid.innerHTML='';
    state.displayOrder.forEach((pIdx)=>{
      const div = document.createElement('div');
      div.className = 'tile'; div.id = 'tile_'+pIdx; div.textContent = state.players[pIdx];
      grid.appendChild(div);
    });
  }
  function startOddShow(){
    const startBtn = document.getElementById('startOddShow');
    const nextBtn  = document.getElementById('oddNext');
    const slot     = document.getElementById('oddCycle');
    if(startBtn) startBtn.classList.add('hidden');

    const orderIdx = state.displayOrder || state.players.map((_,i)=>i);
    const names = orderIdx.map(i=>state.players[i]);
    const finalIdxInOrder = orderIdx.indexOf(state.oddIndex);
    const totalSpins = names.length * 2 + Math.floor(Math.random()*names.length);

    const tick = (step)=>{
      const prev = document.querySelector('.tile.active'); if(prev) prev.classList.remove('active');
      const idx = step % names.length; const realIdx = orderIdx[idx];
      const tile = document.getElementById('tile_'+realIdx); if(tile) tile.classList.add('active');
      if(slot) slot.textContent = names[idx];
      if(step < totalSpins){
        const nextDelay = step < names.length ? 120 : (step > totalSpins - names.length ? 220 : 160);
        setTimeout(()=> tick(step+1), nextDelay);
      } else {
        const hop = (cur)=>{
          const p = document.querySelector('.tile.active'); if(p) p.classList.remove('active');
          const real = orderIdx[cur];
          const t = document.getElementById('tile_'+real); if(t) t.classList.add('active');
          if(slot) slot.innerHTML = `ğŸ¯ <b>${names[cur]}</b>`;
          if(cur === finalIdxInOrder){ if(nextBtn) nextBtn.classList.remove('hidden'); }
          else setTimeout(()=> hop((cur+1)%names.length), 240);
        };
        hop(step % names.length);
      }
    };
    tick(0);
  }
  document.getElementById('startOddShow')?.addEventListener('click', startOddShow);
  document.getElementById('oddNext')?.addEventListener('click', ()=>{
    buildGuessOptions(); setView('#view-guess');
  });

  // ===== ØªØ®Ù…ÙŠÙ† Ø§Ù„ÙƒÙ„Ù…Ø© (Ù„Ù„Ù…Ø®ØªÙ„Ù) â€” 8 Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† Ù†ÙØ³ Ø§Ù„Ø¨ÙŠØ¦Ø© =====
  function buildGuessOptions(){
    const correct = state.pair.base;      // ÙƒÙ„Ù…Ø© Ø§Ù„Ø£ØºÙ„Ø¨ÙŠØ© (Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©)
    const oddWord = state.pair.odd;       // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø®ØªÙ„Ù (Ù„Ø§ Ù†Ø¸Ù‡Ø±Ù‡Ø§ Ø£Ø¨Ø¯Ø§Ù‹)

    // Ø­ÙˆØ¶ Ø§Ù„Ù…Ø´ØªØªØ§Øª Ù…Ù† Ù†ÙØ³ Ø§Ù„Ø¨ÙŠØ¦Ø© (SIMILAR) Ø£Ùˆ Ù†ÙØ³ Ø§Ù„ØªØµÙ†ÙŠÙ (Ø§Ø­ØªÙŠØ§Ø·ÙŠ)
    let pool = [];
    if (SIMILAR[correct] && SIMILAR[correct].length){
      pool = SIMILAR[correct].slice();
    } else {
      const pack = PACKS[state.category].flat();
      pool = [...new Set(pack)];
    }

    // Ù†Ø¸Ù‘Ù: Ù„Ø§ ØªÙƒØ±Ø§Ø±Ø§Øª ÙˆÙ„Ø§ Ø§Ù„ÙƒÙ„Ù…ØªÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØªÙŠÙ†
    const cleaned = [...new Set(pool)].filter(w => w !== correct && w !== oddWord);

    const TARGET_TOTAL = 8;                 // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (ØµØ­ÙŠØ­Ø© + Ù…Ø´ØªØªØ§Øª)
    const NEED_DISTRACTORS = TARGET_TOTAL - 1;

    let distractors = shuffle(cleaned).slice(0, NEED_DISTRACTORS);
    if (distractors.length < NEED_DISTRACTORS){
      const extraPool = PACKS[state.category]
        .flat()
        .filter(w => w !== correct && w !== oddWord && !distractors.includes(w));
      const toTake = Math.min(NEED_DISTRACTORS - distractors.length, extraPool.length);
      distractors = distractors.concat(shuffle(extraPool).slice(0, toTake));
    }

    state.guessOptions = shuffle([correct, ...distractors]);
    state.selectedGuess=null; state.guessCorrect=null;

    const box=$('#choices'); box.innerHTML='';
    state.guessOptions.forEach(w=>{
      const b=el('button','choice',w); b.type='button';
      b.onclick=()=>{
        state.selectedGuess=w;
        document.querySelectorAll('.choice').forEach(x=>x.classList.remove('selected'));
        b.classList.add('selected'); $('#confirmGuess').disabled=false;
      };
      box.appendChild(b);
    });
    $('#confirmGuess').disabled=true;
  }

  document.getElementById('confirmGuess')?.addEventListener('click',()=>{
    const isCorrect = state.selectedGuess===state.pair.base; state.guessCorrect=isCorrect;
    if(isCorrect){ const oddName=state.players[state.oddIndex]; state.scores[oddName]=(state.scores[oddName]||0)+2; }
    saveScores();
    finishAndShowResults();
  });

  // ===== Ø§Ù„Ù†ØªÙŠØ¬Ø© =====
  function finishAndShowResults(){ setView('#view-result'); showResult(); }
  function showResult(){
    const box=$('#resultSummary'); box.innerHTML='';
    const a=el('div','card',`
      <div class="big">Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø© âœ…</div>
      <div class="subtitle">ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø®ØªÙ„Ù Ø«Ù… Ø£Ø¹Ø·ÙŠÙ†Ø§Ù‡ ÙØ±ØµØ© Ø§Ù„ØªØ®Ù…ÙŠÙ† Ø¨Ø¯ÙˆÙ† Ù…Ø§ Ù†ÙØ¶Ø­ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ğŸ˜‰</div>
      <div class="hr"></div>
      <div>Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ†: ${state.guessCorrect===true? '<span class="badge">ØµØ­ÙŠØ­Ø© (+2)</span>' : state.guessCorrect===false? '<span class="badge">ØºÙŠØ± ØµØ­ÙŠØ­Ø©</span>' : '<span class="badge">â€”</span>'}</div>
    `);
    const c=el('div','card');
    c.innerHTML=`<h3 style="margin-bottom:10px;color:#1b1f3a">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­Ø§Ù„ÙŠ</h3>`;
    const rank=el('div','list'); rank.style.flexDirection='column';
    Object.entries(state.scores).sort((a,b)=>b[1]-a[1]).forEach(([n,s])=>
      rank.appendChild(el('div','score',`<strong>${n}</strong><span>${s} Ù†Ù‚Ø·Ø©</span>`))
    );
    c.appendChild(rank);
    box.append(a); box.append(c);
  }

  // Ø£Ø²Ø±Ø§Ø± Ø¹Ø§Ù…Ø©
  document.getElementById('homeBtn')?.addEventListener('click',()=> setView('#view-names'));
  document.getElementById('newRoundSame')?.addEventListener('click',()=>{ buildCategoryUI(); setView('#view-category'); });
  document.getElementById('newRoundReset')?.addEventListener('click',()=>{ state.players=[]; renderNames(); setView('#view-names'); });

  // init
  (function init(){
    loadScores(); renderScores(); renderNames();
  })();
  </script>
</body>
</html>
